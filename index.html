<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;0,700;1,500&family=Italiana&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --bg: #e8e3d9;
      --accent: #b02f35;
      --accent-dark: #8d252a;
      --accent-soft: rgba(176, 47, 53, 0.08);
      --text-main: #2d1b1b;
      --text-soft: #5c4a4a;
      --card-shadow: 0 18px 45px rgba(0,0,0,.12);
      --radius-card: 26px;
      --radius-elem: 16px; /* –î–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –∏ –ø–ª–∏—Ç–æ–∫ */
      --transition: .25s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      background: var(--bg);
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
    }

    .invite {
      max-width: 520px;
      width: 100%;
      background: var(--bg);
      border-radius: var(--radius-card);
      box-shadow: var(--card-shadow);
      padding: 0 0 clamp(24px, 4vw, 32px);
      position: relative;
      overflow: hidden;
    }

    .hero-image {
      width: 100%;
      display: block;
    }

    .hero-image img {
      width: 100%;
      height: auto;
      display: block;
    }

    .content {
      padding: clamp(18px, 4vw, 26px) clamp(18px, 4vw, 32px) 0;
    }

    .main-line {
      text-align: center;
      margin-top: 4px;
      margin-bottom: 18px;
      font-size: 16px;
      font-weight: 500;
    }

    .details {
      text-align: center;
      font-size: 13px;
      line-height: 1.6;
      margin-bottom: 24px;
      color: var(--text-soft);
    }

    .divider {
      width: 42px;
      height: 1px;
      background: rgba(0,0,0,.18);
      margin: 10px auto 32px;
    }

    /* --- –ö–ê–õ–ï–ù–î–ê–†–¨ --- */
    .calendar-section {
      margin-bottom: 32px;
      background: #fdf3e4;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 26px rgba(0,0,0,.08);
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 16px;
      border-bottom: 1px solid rgba(0,0,0,0.05);
      padding-bottom: 8px;
    }

    .calendar-title {
      font-family: "Playfair Display", serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--accent-dark);
    }

    .calendar-month {
      font-size: 13px;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      row-gap: 8px;
      text-align: center;
    }

    .weekday {
      font-size: 11px;
      color: var(--accent);
      margin-bottom: 8px;
      font-weight: 600;
    }

    .day {
      font-size: 13px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      color: var(--text-main);
      z-index: 1;
    }

    .day.muted { color: rgba(0,0,0,0.2); }
    
    .day.event {
      color: #fff;
      font-weight: 600;
    }

    .day.event::before {
      content: "";
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 42px;
      height: 42px;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='%23B02F35' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      z-index: -1;
      filter: drop-shadow(0 6px 12px rgba(176, 47, 53, 0.4));
      animation: heartBeat 1.5s infinite cubic-bezier(0.215, 0.61, 0.355, 1);
    }

    @keyframes heartBeat {
      0% { transform: translate(-50%, -50%) scale(1); }
      14% { transform: translate(-50%, -50%) scale(1.15); }
      28% { transform: translate(-50%, -50%) scale(1); }
      42% { transform: translate(-50%, -50%) scale(1.15); }
      70% { transform: translate(-50%, -50%) scale(1); }
    }

    /* --- –§–û–†–ú–ê --- */
    h2.rsvp-title {
      font-family: "Playfair Display", serif;
      font-size: 22px;
      text-align: center;
      margin-bottom: 24px;
      color: var(--accent-dark);
    }

    .form-group {
      margin-bottom: 20px;
    }

    input[type="text"] {
      width: 100%;
      padding: 16px;
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: var(--radius-elem);
      background: #fffdf8;
      font-family: "Montserrat", sans-serif;
      font-size: 15px;
      outline: none;
      transition: var(--transition);
    }

    input[type="text"]:focus {
      border-color: var(--accent);
      background: #fff;
      box-shadow: 0 0 0 4px var(--accent-soft);
      transform: translateY(-2px);
    }

    /* --- –ö–ê–°–¢–û–ú–ù–´–ï –†–ê–î–ò–û-–ö–ù–û–ü–ö–ò (–±–µ–∑ —Å–º–∞–π–ª–∏–∫–æ–≤) --- */
    .radio-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 24px;
    }

    .radio-option {
      position: relative;
      cursor: pointer;
    }

    .radio-option input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }

    .radio-tile {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      padding: 14px 16px;
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 999px;
      background: #fffdf8;
      transition: var(--transition);
      text-align: left;
      height: 100%;
      position: relative;
      overflow: hidden;
    }

    .radio-label-main {
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--text-main);
      margin-bottom: 2px;
    }

    .radio-label-sub {
      font-size: 11px;
      color: var(--text-soft);
      opacity: 0.8;
    }

    /* –•–æ–≤–µ—Ä –ø–æ –ø–ª–∏—Ç–∫–µ */
    .radio-option:hover .radio-tile {
      border-color: var(--accent);
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      transform: translateY(-1px);
    }

    /* –°–æ—Å—Ç–æ—è–Ω–∏–µ checked */
    .radio-option input:checked + .radio-tile {
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      border-color: transparent;
      box-shadow: 0 10px 26px rgba(176, 47, 53, 0.35);
      transform: translateY(-3px);
    }

    .radio-option input:checked + .radio-tile .radio-label-main,
    .radio-option input:checked + .radio-tile .radio-label-sub {
      color: #fff;
      opacity: 1;
    }

    /* –ú–∞–ª–µ–Ω—å–∫–∞—è –≥–∞–ª–æ—á–∫–∞ —Å–ø—Ä–∞–≤–∞ —É –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ */
    .radio-option input:checked + .radio-tile::after {
      content: "‚úì";
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #fff;
      background: rgba(255,255,255,0.18);
      box-shadow: 0 0 0 2px rgba(0,0,0,0.08);
    }

    /* –ö–Ω–æ–ø–∫–∞ */
    button[type="submit"] {
      width: 100%;
      padding: 18px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 99px;
      font-family: "Montserrat", sans-serif;
      font-size: 14px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(176, 47, 53, 0.3);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    button[type="submit"]:hover {
      background: var(--accent-dark);
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(176, 47, 53, 0.4);
    }
    
    button[type="submit"]:active {
      transform: translateY(0);
    }

    .message {
      margin-top: 16px;
      text-align: center;
      font-size: 13px;
      min-height: 20px;
    }
    .message.error { color: #b3261e; }
    .message.success { color: #1a7f3c; }

    @media (max-width: 480px) {
      body { padding: 14px; }
      .invite { min-height: 100vh; border-radius: 0; }
      .content { padding: 30px 20px 50px; }
      .radio-tile {
        border-radius: var(--radius-elem);
      }
    }
  </style>
</head>
<body>
  <main class="invite">
    <div class="hero-image">
      <img src="top-invite.jpg" alt="Invitation">
    </div>

    <div class="content">
      <p class="main-line">–ü—Ä–∏–≥–ª–∞—à–∞—é —Ç–µ–±—è —Ä–∞–∑–¥–µ–ª–∏—Ç—å –º–æ–π –≤–µ—á–µ—Ä.</p>

      <p class="details">
        <strong>18.12.2025</strong><br>
        –ü—è—Ç–∏–≥–æ—Ä—Å–∫<br>
        –ù–∞—á–∞–ª–æ –≤ <strong>18:30</strong>
      </p>

      <div class="divider"></div>

      <section class="calendar-section">
        <div class="calendar-header">
          <span class="calendar-title">–î–µ–∫–∞–±—Ä—å</span>
          <span class="calendar-month">2025</span>
        </div>
        
        <div class="calendar-grid">
          <div class="weekday">–ü–Ω</div><div class="weekday">–í—Ç</div><div class="weekday">–°—Ä</div><div class="weekday">–ß—Ç</div><div class="weekday">–ü—Ç</div><div class="weekday">–°–±</div><div class="weekday">–í—Å</div>
          
          <div class="day">1</div><div class="day">2</div><div class="day">3</div><div class="day">4</div><div class="day">5</div><div class="day">6</div><div class="day">7</div>
          <div class="day">8</div><div class="day">9</div><div class="day">10</div><div class="day">11</div><div class="day">12</div><div class="day">13</div><div class="day">14</div>
          <div class="day">15</div><div class="day">16</div><div class="day">17</div>
          
          <div class="day event">18</div>
          
          <div class="day">19</div><div class="day">20</div><div class="day">21</div>
          <div class="day">22</div><div class="day">23</div><div class="day">24</div><div class="day">25</div><div class="day">26</div><div class="day">27</div><div class="day">28</div>
          <div class="day">29</div><div class="day">30</div><div class="day">31</div>
          <div class="day muted">1</div><div class="day muted">2</div><div class="day muted">3</div><div class="day muted">4</div>
        </div>
      </section>

      <h2 class="rsvp-title">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ</h2>

      <form id="rsvpForm" novalidate>
        <div class="form-group">
          <input type="text" id="guestName" name="guestName" placeholder=" –ò–º—è " required autocomplete="name" />
        </div>

        <div class="form-group">
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="status" value="yes" required>
              <div class="radio-tile">
                <span class="radio-label-main">–Ø –±—É–¥—É</span>
                <span class="radio-label-sub">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–¥—É</span>
              </div>
            </label>

            <label class="radio-option">
              <input type="radio" name="status" value="no">
              <div class="radio-tile">
                <span class="radio-label-main">–ù–µ —Å–º–æ–≥—É</span>
                <span class="radio-label-sub">–Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è</span>
              </div>
            </label>
          </div>
        </div>

        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
        <div id="formMessage" class="message"></div>
      </form>
    </div>
  </main>

  <script>
    const form = document.getElementById("rsvpForm");
    const nameInput = document.getElementById("guestName");
    const messageBox = document.getElementById("formMessage");
    const submitBtn = form.querySelector('button[type="submit"]');

    // URL Formspree
    const FORM_ENDPOINT = "https://formspree.io/f/myzrnoqw";

    form.addEventListener("submit", async function (e) {
      e.preventDefault();
      messageBox.textContent = "";
      messageBox.className = "message";

      const name = nameInput.value.trim();
      const statusInput = form.querySelector('input[name="status"]:checked');

      // –ü—Ä–æ–≤–µ—Ä–∫–∏
      if (!name) {
        showError("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Å—è üòä");
        shakeInput(nameInput);
        return;
      }
      
      const forbidden = ["–≥–æ—Å—Ç—å", "anon", "–∞–Ω–æ–Ω–∏–º"];
      if (forbidden.some(f => name.toLowerCase().includes(f))) {
        showError("–ù–∞–ø–∏—à–∏ –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞!");
        return;
      }

      if (!statusInput) {
        showError("–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ üëá");
        return;
      }

      // –û—Ç–ø—Ä–∞–≤–∫–∞
      submitBtn.disabled = true;
      const originalText = submitBtn.textContent;
      submitBtn.textContent = "–û—Ç–ø—Ä–∞–≤–ª—è—é...";

      try {
        const response = await fetch(FORM_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json", "Accept": "application/json" },
          body: JSON.stringify({ name, status: statusInput.value, sentAt: new Date().toISOString() })
        });

        if (response.ok) {
          showSuccess("–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–≤–µ—Ç! ‚ù§Ô∏è");
          form.reset();
          document.querySelectorAll('.radio-option input').forEach(el => el.checked = false);
          
          // –ó–ê–ü–£–°–ö –ö–û–ù–§–ï–¢–¢–ò, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç "–î–ê"
          if (statusInput.value === 'yes') {
            triggerConfetti();
          }

        } else {
          showError("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ.");
        }
      } catch (error) {
        showError("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏.");
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });

    function showError(text) {
      messageBox.textContent = text;
      messageBox.className = "message error";
    }

    function showSuccess(text) {
      messageBox.textContent = text;
      messageBox.className = "message success";
    }
    
    // –ê–Ω–∏–º–∞—Ü–∏—è —Ç—Ä—è—Å–∫–∏ –ø–æ–ª—è –≤–≤–æ–¥–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ
    function shakeInput(input) {
      input.style.transform = "translateX(10px)";
      setTimeout(() => input.style.transform = "translateX(-10px)", 100);
      setTimeout(() => input.style.transform = "translateX(-10px)", 200);
      setTimeout(() => input.style.transform = "translateX(5px)", 300);
      setTimeout(() => input.style.transform = "translateX(0)", 400);
    }

    // –≠—Ñ—Ñ–µ–∫—Ç –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    function triggerConfetti() {
      var duration = 3 * 1000;
      var animationEnd = Date.now() + duration;
      var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 999 };

      function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
      }

      var interval = setInterval(function() {
        var timeLeft = animationEnd - Date.now();

        if (timeLeft <= 0) {
          return clearInterval(interval);
        }

        var particleCount = 50 * (timeLeft / duration);
        confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
        confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
      }, 250);
    }
  </script>
</body>
</html>
