<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- –®—Ä–∏—Ñ—Ç—ã –≤ —Å—Ç–∏–ª–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;0,700;1,500&family=Italiana&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #e8e3d9;
      --accent: #b02f35;
      --accent-dark: #8d252a;
      --text-main: #2d1b1b;
      --text-soft: #5c4a4a;
      --card-shadow: 0 18px 45px rgba(0,0,0,.12);
      --radius-card: 26px;
      --transition: .25s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      background: var(--bg);
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
    }

    .invite {
      max-width: 520px;
      width: 100%;
      background: var(--bg);
      border-radius: var(--radius-card);
      box-shadow: var(--card-shadow);
      padding: 0 0 clamp(24px, 4vw, 32px);
      position: relative;
      overflow: hidden;
    }

    .hero-image {
      width: 100%;
      display: block;
    }

    .hero-image img {
      width: 100%;
      height: auto;
      display: block;
    }

    .content {
      padding: clamp(18px, 4vw, 26px) clamp(18px, 4vw, 32px) 0;
    }

    .main-line {
      text-align: center;
      margin-top: 4px;
      margin-bottom: 18px;
      font-size: 16px;
      font-weight: 500;
    }

    .details {
      text-align: center;
      font-size: 13px;
      line-height: 1.6;
      margin-bottom: 24px;
      color: var(--text-soft);
    }

    .divider {
      width: 42px;
      height: 1px;
      background: rgba(0,0,0,.18);
      margin: 10px auto 22px;
    }

    .calendar-section {
      margin-bottom: 28px;
    }

    .calendar-title {
      text-align: center;
      font-size: 16px;
      font-weight: 500;
      letter-spacing: .14em;
      text-transform: uppercase;
      margin-bottom: 6px;
      color: var(--accent-dark);
    }

    .calendar-month {
      text-align: center;
      font-size: 14px;
      color: var(--text-soft);
      margin-bottom: 12px;
    }

    .calendar-card {
      background: #fdf3e4;
      border-radius: 20px;
      padding: 14px 16px 16px;
      box-shadow: 0 10px 26px rgba(0,0,0,.08);
    }

    .calendar-grid-header,
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      text-align: center;
      font-size: 11px;
    }

    .calendar-grid-header {
      font-weight: 500;
      color: var(--text-soft);
      margin-bottom: 6px;
    }

    .calendar-day {
      padding: 7px 0;
      border-radius: 999px;
      font-size: 12px;
      color: var(--text-main);
      position: relative;
    }

    .calendar-day--muted {
      opacity: .35;
    }

    .calendar-day--event {
      font-weight: 600;
      color: var(--accent-dark);
    }

    .calendar-day--event span {
      position: relative;
      z-index: 1;
    }

    .calendar-day--event::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 32px;
      height: 28px;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle at 30% 20%, #ffe4e7 0, rgba(176,47,53,0.9) 60%, rgba(176,47,53,0.3) 100%);
      clip-path: polygon(
        50% 92%,
        18% 62%,
        14% 48%,
        18% 36%,
        26% 28%,
        36% 24%,
        45% 26%,
        50% 32%,
        55% 26%,
        64% 24%,
        74% 28%,
        82% 36%,
        86% 48%,
        82% 62%
      );
      animation: heartPulse 1.4s ease-in-out infinite;
    }

    @keyframes heartPulse {
      0%, 100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: .9;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.15);
        opacity: 1;
      }
    }

    .calendar-legend {
      margin-top: 10px;
      text-align: center;
      font-size: 11px;
      color: var(--text-soft);
    }

    .calendar-legend-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #ffffff;
      padding: 4px 10px;
      border-radius: 999px;
      box-shadow: 0 4px 10px rgba(0,0,0,.12);
    }

    .calendar-legend-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
    }

    h2 {
      font-size: 16px;
      text-align: center;
      margin-bottom: 12px;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: var(--accent-dark);
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .field-label {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 4px;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,.15);
      outline: none;
      font-size: 14px;
      transition: border-color var(--transition), box-shadow var(--transition), transform var(--transition);
      background: #fffdf8;
    }

    input[type="text"]:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(176, 47, 53, .18);
      transform: translateY(-1px);
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 2px;
      margin-bottom: 4px;
    }

    .option {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      cursor: pointer;
      user-select: none;
    }

    .option input[type="radio"] {
      width: 16px;
      height: 16px;
      accent-color: var(--accent);
      cursor: pointer;
    }

    .btn-wrap {
      margin-top: 4px;
      display: flex;
      justify-content: center;
    }

    button[type="submit"] {
      border: none;
      border-radius: 999px;
      padding: 10px 26px;
      font-size: 14px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: .08em;
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      color: #fffaf4;
      cursor: pointer;
      box-shadow: 0 12px 20px rgba(0,0,0,.25);
      transition: transform var(--transition), box-shadow var(--transition), filter var(--transition);
    }

    button[type="submit"]:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 26px rgba(0,0,0,.28);
      filter: brightness(1.02);
    }

    button[type="submit"]:active {
      transform: translateY(0);
      box-shadow: 0 8px 14px rgba(0,0,0,.2);
    }

    .message {
      margin-top: 8px;
      font-size: 12px;
      text-align: center;
      min-height: 18px;
    }

    .message.error {
      color: #b3261e;
    }

    .message.success {
      color: #1a7f3c;
    }

    @media (max-width: 480px) {
      body {
        padding: 14px;
      }
      .calendar-card {
        padding: 12px 10px 14px;
      }
      .calendar-grid-header,
      .calendar-grid {
        gap: 4px;
      }
    }
  </style>
</head>
<body>
  <main class="invite">
    <div class="hero-image">
      <img src="top-invite.jpg" alt="20 years invitation">
    </div>

    <div class="content">
      <p class="main-line">–ü—Ä–∏–≥–ª–∞—à–∞—é —Ç–µ–±—è —Ä–∞–∑–¥–µ–ª–∏—Ç—å –º–æ–π –≤–µ—á–µ—Ä.</p>

      <p class="details">
        <strong>18.12.2025</strong><br>
        –ì–æ—Ä–æ–¥ / –º–µ—Å—Ç–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è<br>
        –ù–∞—á–∞–ª–æ –≤ <strong>18:30</strong>
      </p>

      <div class="divider"></div>

      <section class="calendar-section" id="calendar">
        <div class="calendar-title">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
        <div class="calendar-month">–î–µ–∫–∞–±—Ä—å 2025</div>

        <div class="calendar-card">
          <div class="calendar-grid-header">
            <div>–ü–Ω</div><div>–í—Ç</div><div>–°—Ä</div><div>–ß—Ç</div><div>–ü—Ç</div><div>–°–±</div><div>–í—Å</div>
          </div>
          <div class="calendar-grid">
            <div class="calendar-day">1</div>
            <div class="calendar-day">2</div>
            <div class="calendar-day">3</div>
            <div class="calendar-day">4</div>
            <div class="calendar-day">5</div>
            <div class="calendar-day">6</div>
            <div class="calendar-day">7</div>

            <div class="calendar-day">8</div>
            <div class="calendar-day">9</div>
            <div class="calendar-day">10</div>
            <div class="calendar-day">11</div>
            <div class="calendar-day">12</div>
            <div class="calendar-day">13</div>
            <div class="calendar-day">14</div>

            <div class="calendar-day">15</div>
            <div class="calendar-day">16</div>
            <div class="calendar-day">17</div>
            <div class="calendar-day calendar-day--event"><span>18</span></div>
            <div class="calendar-day">19</div>
            <div class="calendar-day">20</div>
            <div class="calendar-day">21</div>

            <div class="calendar-day">22</div>
            <div class="calendar-day">23</div>
            <div class="calendar-day">24</div>
            <div class="calendar-day">25</div>
            <div class="calendar-day">26</div>
            <div class="calendar-day">27</div>
            <div class="calendar-day">28</div>

            <div class="calendar-day">29</div>
            <div class="calendar-day">30</div>
            <div class="calendar-day">31</div>
            <div class="calendar-day calendar-day--muted"></div>
            <div class="calendar-day calendar-day--muted"></div>
            <div class="calendar-day calendar-day--muted"></div>
            <div class="calendar-day calendar-day--muted"></div>
          </div>

          <div class="calendar-legend">
            <span class="calendar-legend-badge">
              <span class="calendar-legend-dot"></span>
              <span>–î–µ–Ω—å –ø—Ä–∞–∑–¥–Ω–∏–∫–∞</span>
            </span>
          </div>
        </div>
      </section>

      <h2>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —Å–≤–æ—ë –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ</h2>

      <form id="rsvpForm" novalidate>
        <div>
          <div class="field-label">–ò–º—è –≥–æ—Å—Ç—è *</div>
          <input
            type="text"
            id="guestName"
            name="guestName" 
            autocomplete="name"
            required
          />
        </div>

        <div>
          <div class="field-label">–ü–ª–∞–Ω–∏—Ä—É–µ—à—å –ø—Ä–∏–π—Ç–∏? *</div>
          <div class="options">
            <label class="option">
              <input type="radio" name="status" value="yes" required>
              <span>–î–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –±—É–¥—É</span>
            </label>
            <label class="option">
              <input type="radio" name="status" value="no">
              <span>–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è</span>
            </label>
          </div>
        </div>

        <div class="btn-wrap">
          <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>

        <div id="formMessage" class="message"></div>
      </form>
    </div>
  </main>

  <script>
    const form = document.getElementById("rsvpForm");
    const nameInput = document.getElementById("guestName");
    const messageBox = document.getElementById("formMessage");
    const submitBtn = form.querySelector('button[type="submit"]');

    // URL Formspree
    const FORM_ENDPOINT = "https://formspree.io/f/myzrnoqw";

    form.addEventListener("submit", async function (e) {
      e.preventDefault();
      messageBox.textContent = "";
      messageBox.className = "message";

      const name = nameInput.value.trim();
      const statusInput = form.querySelector('input[name="status"]:checked');

      const forbidden = ["–≥–æ—Å—Ç—å", "–≥–æ—Å—Ç—å—è", "anon", "anonymous", "–∞–Ω–æ–Ω–∏–º", "–≥–æ—Å—Ç—å –∞–Ω–æ–Ω–∏–º"].map(
        s => s.toLowerCase().trim()
      );

      if (!name) {
        showError("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏ —Å–≤–æ—ë –∏–º—è.");
        return;
      }

      if (forbidden.includes(name.toLowerCase())) {
        showError("–ù–∞–ø–∏—à–∏ —Å–≤–æ—ë –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è ‚Äî —Ç–∞–∫ –º–Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ—â–µ –ø–æ–Ω—è—Ç—å, –∫—Ç–æ –ø—Ä–∏–¥—ë—Ç üòä");
        return;
      }

      if (!statusInput) {
        showError("–í—ã–±–µ—Ä–∏ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: –±—É–¥—É / –Ω–µ —Å–º–æ–≥—É.");
        return;
      }

      const status = statusInput.value;

      // –±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
      submitBtn.disabled = true;
      const originalText = submitBtn.textContent;
      submitBtn.textContent = "–û—Ç–ø—Ä–∞–≤–∫–∞...";

      // –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —É–π–¥—É—Ç –≤ Formspree
      const payload = {
        name: name,
        status: status,
        sentAt: new Date().toISOString(),
        _subject: "RSVP —Å —Å–∞–π—Ç–∞ kami-birthday-ry.ru"
      };

      try {
        const response = await fetch(FORM_ENDPOINT, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Accept": "application/json"
          },
          body: JSON.stringify(payload)
        });

        if (response.ok) {
          showSuccess("–°–ø–∞—Å–∏–±–æ! –Ø –ø–æ–ª—É—á–∏–ª–∞ —Ç–≤–æ–π –æ—Ç–≤–µ—Ç üíå");
          form.reset();
        } else {
          showError("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ —á—É—Ç—å –ø–æ–∑–∂–µ.");
        }
      } catch (error) {
        showError("–ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.");
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });

    function showError(text) {
      messageBox.textContent = text;
      messageBox.className = "message error";
    }

    function showSuccess(text) {
      messageBox.textContent = text;
      messageBox.className = "message success";
    }
  </script>
</body>
</html>
